@if (isLoggedIn) {
<div class="surface-card border-bottom-1 border-200 sticky top-0 z-5">

  <div class="flex align-items-center justify-content-between px-4 lg:px-8 py-3"
       style="max-width:1440px; margin:0 auto;">

    <div class="flex align-items-center gap-6">
      <span class="text-2xl font-bold text-900 cursor-pointer" routerLink="/dashboard">
        HostFlow
      </span>
      <span class="text-xs text-500 font-medium -mt-1">
      {{ supabase.orgName() }}
    </span>

      <nav #navBar class="hidden lg:flex gap-6 nav-wrap">
        @for (item of visibleNavItems; track item.route; let i = $index) {
        <button
          #navBtn
          type="button"
          class="nav-item"
          [class.is-active]="activeIndex === i"
          (click)="go(item.route)"
        >
          {{ item.label }}
        </button>
        }

        <span #indicator class="nav-indicator"></span>
      </nav>
    </div>

    <div class="flex align-items-center gap-3">
      <button
        class="lg:hidden p-2 border-none bg-transparent cursor-pointer"
        (click)="toggleMenu()"
        aria-label="Toggle navigation"
        type="button"
      >
        <i class="pi pi-bars text-2xl text-700"></i>
      </button>

      <div class="hidden lg:flex align-items-center gap-1">
        <div class="hidden lg:flex align-items-center gap-1 cursor-pointer">
          <span class="text-700 font-medium">
        {{ userFullName }} ({{ userRole | titlecase }})
      </span>
          <p-avatar
            [label]="userFullName.charAt(0) || 'U'"
            shape="circle"
            class="user-avatar bg-primary">
          </p-avatar>
        </div>

        <button
          class="p-2 border-none bg-transparent cursor-pointer text-600 hover:text-900 transition-colors"
          (click)="logout()"
          title="Sign Out">
          <i class="pi pi-sign-out text-xl"></i>
        </button>
      </div>
    </div>
  </div>

  @if (mobileMenuOpen) {
  <div class="lg:hidden surface-card border-top-1 border-200 px-4 py-3">
    <div class="flex flex-column gap-2">
      @for (item of visibleNavItems; track item.route; let i = $index) {
      <button
        type="button"
        class="nav-item mobile"
        [class.is-active]="activeIndex === i"
        (click)="go(item.route); toggleMenu()"
      >
        {{ item.label }}
      </button>
      }
      <button
        type="button"
        class="nav-item mobile text-red-500"
        (click)="logout()">
        <i class="pi pi-sign-out mr-2"></i> Sign Out
      </button>
    </div>
  </div>
  }
</div>
}
