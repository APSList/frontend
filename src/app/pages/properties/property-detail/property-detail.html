<!-- PAGE BACKGROUND -->
<div class="surface-50 min-h-screen">

  <!-- CONTENT CONTAINER -->
  <div class="px-4 py-4" style="max-width:1280px;margin:0 auto;">

    <!-- PAGE HEADER -->
    <div class="flex justify-content-between align-items-center mb-4">
      <h2 class="text-900 text-2xl font-semibold m-0">
        Property details
      </h2>

      <div class="flex gap-2">
        @if (!editMode()) {
          <p-button
            icon="pi pi-pencil"
            label="Edit"
            severity="secondary"
            rounded
            (onClick)="toggleEdit()">
          </p-button>
        }

        @if (editMode()) {
          <p-button
            icon="pi pi-save"
            label="Save"
            severity="primary"
            rounded
            (onClick)="save()">
          </p-button>
        }

        <p-button
          icon="pi pi-arrow-left"
          text
          rounded
          (onClick)="back()">
        </p-button>
      </div>
    </div>

    <!-- MAIN GRID -->
    <div class="grid">

      <!-- GENERAL INFO CARD -->
      <div class="col-12 lg:col-5">
        <p-card class="p-4 h-full border-round-2xl shadow-1 surface-card">

          <ng-template pTemplate="header">
            <span class="font-semibold text-lg text-900">
              General information
            </span>
          </ng-template>

          <form [formGroup]="form" class="flex flex-column gap-4">

            <div class="flex flex-column gap-1">
              <label class="text-sm text-600">Name</label>
              <input pInputText formControlName="name" />
            </div>

            <div class="flex flex-column gap-1">
              <label class="text-sm text-600">Country</label>
              <input pInputText formControlName="country" />
            </div>

            <div class="flex flex-column gap-1">
              <label class="text-sm text-600">Description</label>
              <textarea
                pTextarea
                rows="4"
                autoResize
                formControlName="description">
              </textarea>
            </div>

            <div class="flex flex-column gap-1 max-w-12rem">
              <label class="text-sm text-600">Max guests</label>
              <p-inputNumber
                formControlName="maxGuests"
                showButtons
                [min]="1"
                [max]="20">
              </p-inputNumber>
            </div>

          </form>
        </p-card>
      </div>

      <!-- PHOTOS CARD -->
      <div class="col-12 lg:col-7">
        <p-card class="p-4 h-full border-round-2xl shadow-1 surface-card">

          <ng-template pTemplate="header">
            <div class="flex justify-content-between align-items-center">
              <span class="font-semibold text-lg text-900">
                Photos
              </span>

              @if (editMode()) {
                <p-fileUpload
                  mode="basic"
                  accept="image/*"
                  chooseLabel="Upload"
                  chooseIcon="pi pi-upload"
                  severity="secondary"
                  [customUpload]="true"
                  (uploadHandler)="addImage($event)">
                </p-fileUpload>
              }
            </div>
          </ng-template>

          <p-galleria
            [value]="property().images"
            [numVisible]="5"
            [showItemNavigators]="true"
            [showIndicators]="false"
            [circular]="true"
            class="border-round-lg overflow-hidden">

            <ng-template pTemplate="item" let-image let-i="index">
              <div class="relative">
                <img
                  [src]="image"
                  class="w-full h-20rem object-cover" />

                @if (editMode()) {
                  <p-button
                    icon="pi pi-trash"
                    severity="danger"
                    text
                    rounded
                    class="absolute top-0 right-0 m-2"
                    (onClick)="removeImage(i)">
                  </p-button>
                }
              </div>
            </ng-template>

            <ng-template pTemplate="thumbnail" let-image>
              <img
                [src]="image"
                class="w-full h-4rem object-cover border-round-sm" />
            </ng-template>

          </p-galleria>

        </p-card>
      </div>

    </div>

  </div>
</div>
