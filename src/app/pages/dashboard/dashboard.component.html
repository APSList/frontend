<!-- PAGE BACKGROUND -->
<div class="surface-50 min-h-screen">

  <!-- CONTENT CONTAINER -->
  <div class="px-4 py-4" style="max-width:1280px;margin:0 auto;">

    <!-- KPI ROW -->
    <div class="grid mb-4">

      <!-- Active Bookings -->
      <div class="col-12 md:col-6 lg:col-3">
        <p-card class="h-full border-round-2xl shadow-1 surface-card p-3">
          <div class="text-600 text-sm font-medium mb-2">
            Active Bookings
          </div>
          <div class="text-4xl font-semibold text-900">
              {{ activeBookingsCount() }}
          </div>
        </p-card>
      </div>

      <!-- Upcoming Arrivals -->
      <div class="col-12 md:col-6 lg:col-3">
        <p-card class="h-full border-round-2xl shadow-1 surface-card p-3">
          <div class="text-600 text-sm font-medium mb-2">
            Upcoming Arrivals
          </div>
          <div class="text-4xl font-semibold text-900">
            {{ upcomingArrivalsCount() }}
          </div>
        </p-card>
      </div>

      <!-- Monthly Revenue -->
      <div class="col-12 md:col-6 lg:col-3">
        <p-card class="h-full border-round-2xl shadow-1 surface-card p-3">
          <div class="text-600 text-sm font-medium mb-2">
            Monthly Revenue
          </div>
          <div class="text-4xl font-semibold text-900">
            {{ monthlyRevenue() | currency:'EUR' }}
          </div>
        </p-card>
      </div>

      <!-- Units -->
      <div class="col-12 md:col-6 lg:col-3">
        <p-card class="h-full border-round-2xl shadow-1 surface-card p-3">
          <div class="text-600 text-sm font-medium mb-2">
            Units
          </div>
          <div class="text-4xl font-semibold text-900">
            {{ totalUnitsCount() }}
          </div>
        </p-card>
      </div>

    </div>

    <!-- MAIN GRID -->
    <div class="grid">

      <!-- CALENDAR -->
      <div class="col-12 md:col-6">
        <p-card class="p-4 h-full border-round-2xl shadow-1 surface-card">

          <ng-template pTemplate="header">
            <div class="flex justify-content-between align-items-center">
              <span class="font-semibold text-lg text-900">
                Calendar
              </span>

              <div class="flex gap-4">
                <div class="flex gap-4">
                  <div class="flex align-items-center gap-2 text-sm text-600">
                    <span class="w-1rem h-1rem border-round bg-blue-500"></span>
                    Check-In
                  </div>
                  <div class="flex align-items-center gap-2 text-sm text-600">
                    <span class="w-1rem h-1rem border-round bg-orange-500"></span>
                    Check-Out
                  </div>
                </div>
              </div>
            </div>
          </ng-template>

          <div class="p-3">
            <p-datePicker
              [inline]="true"
              class="w-full border-none"
              styleClass="w-full">

              <ng-template pTemplate="date" let-date>
                <div class="flex flex-column align-items-center gap-1">
                  <span class="text-900">{{ date.day }}</span>

                  <div class="flex gap-1 justify-content-center" style="min-height: 6px;">
                    @for (event of getDayEvents(date); track $index) {
                    <span
                      class="border-circle"
                      [pTooltip]="event.type === 'IN' ? 'Check-in' : 'Check-out'"
                      [style.width]="'6px'"
                      [style.height]="'6px'"
                      [ngClass]="{
              'bg-blue-500': event.type === 'IN',
              'bg-orange-500': event.type === 'OUT'
            }">
          </span>
                    }
                  </div>
                </div>
              </ng-template>
            </p-datePicker>
          </div>

        </p-card>
      </div>

      <div class="col-12 md:col-6">
        <p-card class="p-4 h-full border-round-2xl shadow-1 surface-card">

          <ng-template pTemplate="header">
      <span class="font-semibold text-lg text-900">
        Upcoming Agenda
      </span>
          </ng-template>

          <p-table
            [value]="workerTasks()"
            [rowHover]="true"
            class="text-sm">

            <ng-template pTemplate="header">
              <tr>
                <th class="text-700 font-medium">Booking Code</th>
                <th class="text-700 font-medium">Type</th>
                <th class="text-700 font-medium">Date</th>
                <th class="text-700 font-medium">Property</th>
              </tr>
            </ng-template>

            <ng-template pTemplate="body" let-task>
              <tr>
                <td class="text-900 font-semibold">
                  #{{ task.bookingId }}
                </td>
                <td>
                  <p-tag
                    [value]="task.type"
                    [severity]="task.type === 'CHECK-IN' ? 'info' : 'warn'">
                  </p-tag>
                </td>
                <td class="text-700">
                  {{ task.date | date:'MMM d, yyyy' }}
                </td>
                <td class="text-700">
                  {{ task.propertyName }}
                </td>
              </tr>
            </ng-template>

          </p-table>

        </p-card>
      </div>

    </div>

  </div>
</div>
